# This GitHub Actions workflow builds a custom Termux bootstrap file.
# It can be triggered manually from the "Actions" tab on your GitHub repository page.

name: Build Custom Bootstrap

on:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Check out the repository's code so the workflow can access it.
      - name: Check out repository
        uses: actions/checkout@v4

      # Step 2: Run the build script.
      # This script handles downloading dependencies, applying patches, and building the bootstrap inside a Docker container.
      - name: Run custom bootstrap build script
        run: ./build_custom_bootstrap.sh

      # Step 3: Upload the generated bootstrap file as an artifact.
      # This makes the file available for download from the workflow run's summary page.
      - name: Upload bootstrap artifact
        uses: actions/upload-artifact@v4
        with:
          name: bootstrap-zip
          path: bootstrap-com.vault.fide-aarch64.zip
